<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bingsum.mapper.DriverMapper">

    <select id="getDriverInfoList" resultType="com.bingsum.util.ParaData">
        select * from driver where delete_time is null
    </select>

    <select id="getDriverInfo" resultType="com.bingsum.util.ParaData">
         select t.*,
           case when t.gender='1' then '男' else '女' end genderStr
          from driver t
            where delete_time is null and id = #{id}
    </select>

    <insert id="newDriverInfo" parameterType="com.bingsum.util.ParaData">
        insert into driver(name,phone,age,address,gender,emergency_name,emergency_phone,id_card,driving_year)
				values (#{name},#{phone},#{age},#{address},#{gender},#{emergency_name},#{emergency_phone},#{id_card},#{driving_year})
    </insert>

    <update id="setDriverInfo" parameterType="com.bingsum.util.ParaData">
        update driver set name=#{name},phone=#{phone},age=#{age},address=#{address},gender=#{gender},emergency_name=#{emergency_name},emergency_phone=#{emergency_phone},id_card=#{id_card} where id = #{id};
    </update>

    <update id="delDriver" parameterType="com.bingsum.util.ParaData">
        update driver set delete_time = NOW() where id = #{id};
    </update>

    <select id="getDriverBriefInfo" resultType="com.bingsum.util.ParaData">
        select id,name from driver
    </select>
</mapper>